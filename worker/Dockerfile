FROM python:3.8
WORKDIR /app
COPY . .

RUN pip3 install -r requirements.txt --disable-pip-version-check

ARG POSTGRES_PASSWORD POSTGRES_USER POSTGRES_PORT POSTGRES_HOST POSTGRES_DB_NAME
ENV POSTGRES_PASSWORD $POSTGRES_PASSWORD
ENV POSTGRES_USER $POSTGRES_USER
ENV POSTGRES_PORT $POSTGRES_PORT
ENV POSTGRES_HOST $POSTGRES_HOST
ENV POSTGRES_DB_NAME $POSTGRES_DB_NAME

ENV PYTHONUNBUFFERED=1

CMD ["bash", "-c", "./run.sh"]